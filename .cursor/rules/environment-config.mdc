---
globs: .env*,next.config.*,package.json
description: 環境設定とデプロイメント要件
---

# 環境設定ガイドライン

## 必須環境変数
```bash
# Google AI Studio APIキー（必須）
GEMINI_API_KEY=your_gemini_api_key

# OpenRouter APIキー（必須）
OPENROUTER_API_KEY=your_openrouter_api_key

# OpenRouterモデル（任意、デフォルトは推奨モデル）
OPENROUTER_MODEL=anthropic/claude-3.5-sonnet
```

## 必須依存関係
```json
{
  "dependencies": {
    "@google/generative-ai": "^0.21.0",
    "next": "15.0.0",
    "react": "^18.0.0",
    "typescript": "^5.0.0"
  }
}
```

## Next.js設定
```typescript
// next.config.ts
const nextConfig = {
  experimental: {
    serverComponentsExternalPackages: ['@google/generative-ai']
  },
  api: {
    bodyParser: {
      sizeLimit: '2gb' // 2GB制限対応
    }
  }
}
```

## ファイル制限対応
- **最大ファイルサイズ**: 2GB
- **保存期間**: 48時間（Google Files API制限）
- **プロジェクト合計**: 20GB制限
- **MIME TYPE**: `video/*`のみ許可

## セキュリティ考慮事項
- APIキーは環境変数で管理
- ファイルアップロード時のバリデーション
- レート制限の実装推奨
- CORS設定（必要に応じて）

## デプロイメント
- Vercel推奨（Next.js 15対応）
- 環境変数の設定を忘れずに
- ビルド時の依存関係確認